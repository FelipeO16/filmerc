import{d as I,A as z,B as G,r as R,K as P,C as H,c,e,i as f,f as s,w as a,_ as p,I as Y,l as n,W as x,t as o,g as w,F as D,k as v,X as K,L as O,G as C,D as N,M as Q,Y as W,T as X,H as q,m as j,n as J,x as u}from"./index-F7aNBBG7.js";import{_ as g}from"./BaseCard.vue_vue_type_script_setup_true_lang-BWqNX1v3.js";import{_ as Z}from"./BaseInput.vue_vue_type_script_setup_true_lang-Dz0fj_QN.js";import{f as ee}from"./format-N88NX5Wy.js";import{p as te}from"./pt-BR-B99el_pn.js";const se={class:"space-y-6"},le={class:"md:flex md:items-center md:justify-between"},ae={class:"mt-4 flex md:mt-0 md:ml-4"},oe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"},ne={class:"flex items-end"},ie={class:"overflow-x-auto"},re={class:"min-w-full divide-y divide-gray-200"},de={class:"bg-white divide-y divide-gray-200"},ue={class:"px-6 py-4 whitespace-nowrap"},ce={class:"flex items-center"},me={class:"flex-shrink-0 h-10 w-10"},xe={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},fe={class:"ml-4"},ge={class:"text-sm font-medium text-gray-900"},pe={class:"text-sm text-gray-500"},ve={class:"px-6 py-4"},_e={class:"flex flex-wrap gap-1"},ye={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},he={class:"px-6 py-4 whitespace-nowrap"},be={class:"text-sm text-gray-900"},we={key:0,class:"text-xs text-red-600 font-medium"},De={class:"px-6 py-4 whitespace-nowrap"},ke={class:"text-sm text-gray-900"},Re={class:"text-sm text-gray-500"},Ce={class:"px-6 py-4 whitespace-nowrap"},Fe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ee={class:"flex justify-end space-x-2"},Te={key:0},Ve={colspan:"6",class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},Ye={class:"flex flex-col items-center justify-center py-8"},Ne={key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50"},je={class:"bg-white/95 backdrop-blur-md rounded-2xl max-w-4xl w-full max-h-[90vh] shadow-2xl border border-white/20 p-4"},Me={class:"p-4 max-h-[80vh] overflow-y-auto"},Se={class:"flex justify-between items-start mb-6"},$e={class:"flex items-center space-x-4"},Le={key:0,class:"space-y-6"},Be={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ae={class:"flex items-center mb-4"},Ue={class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg mr-4"},Ie={class:"space-y-3"},ze={class:"flex items-center"},Ge={class:"flex-1"},Pe={class:"font-semibold text-gray-900"},He={class:"text-sm text-gray-600"},Ke={class:"grid grid-cols-2 gap-4 text-sm"},Oe={class:"text-gray-900"},Qe={class:"text-gray-900"},We={class:"flex items-center mb-4"},Xe={class:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg mr-4"},qe={class:"grid grid-cols-2 gap-6"},Je={class:"text-lg font-semibold text-gray-900"},Ze={class:"text-lg font-semibold text-gray-900"},et={class:"flex items-center mb-4"},tt={class:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg mr-4"},st={class:"text-sm text-gray-600"},lt={class:"flex flex-wrap gap-4"},at={class:"w-12 h-16 bg-gradient-to-br from-gray-200 to-gray-300 rounded-lg flex items-center justify-center flex-shrink-0"},ot={class:"flex-1 min-w-0"},nt={class:"font-semibold text-gray-900 truncate"},it={class:"text-sm text-gray-600"},rt={class:"flex items-center mb-4"},dt={class:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg mr-4"},ut={class:"flex items-center"},ct={class:"flex-1"},mt={class:"font-semibold text-gray-900"},xt={class:"text-sm text-gray-600"},ft={class:"mt-8 flex justify-end"},bt=I({__name:"RentalListView",setup(gt){const _=z(),{loading:M}=G(_),r=R({clientSearch:"",rentalDateFrom:"",returnDateFrom:"",status:void 0}),i=R(null),y=R(!1);P(()=>{_.loadRentals()});const F=H(()=>{const d={...r.value,rentalDateFrom:r.value.rentalDateFrom?new Date(r.value.rentalDateFrom):void 0,returnDateFrom:r.value.returnDateFrom?new Date(r.value.returnDateFrom):void 0};return _.filteredRentals(d)});let E;function S(){clearTimeout(E),E=setTimeout(()=>{},300)}function $(){r.value={clientSearch:"",rentalDateFrom:"",returnDateFrom:"",status:void 0}}function L(d){confirm("Confirmar devolução desta locação?")&&_.returnRental(d)}function B(d){i.value=d,y.value=!0}function h(d){return ee(d,"dd/MM/yyyy",{locale:te})}function k(d){return d.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}function A(d){return d.status===x.RENTED&&d.returnDate<new Date}return(d,t)=>{const m=w("el-icon"),T=w("el-date-picker"),V=w("el-option"),U=w("el-select");return u(),c(D,null,[e("div",se,[e("div",le,[t[8]||(t[8]=e("div",{class:"flex-1 min-w-0"},[e("h2",{class:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate"}," Gerenciamento de Locações "),e("p",{class:"mt-1 text-sm text-gray-500"},"Gerencie locações ativas, devoluções e histórico.")],-1)),e("div",ae,[s(p,{variant:"primary",onClick:t[0]||(t[0]=l=>d.$router.push("/rentals/create"))},{default:a(()=>[s(m,{class:"mr-2"},{default:a(()=>[s(n(K))]),_:1}),t[7]||(t[7]=v(" Nova Locação "))]),_:1,__:[7]})])]),s(g,null,{default:a(()=>[e("div",oe,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Buscar Cliente",-1)),s(Z,{modelValue:r.value.clientSearch,"onUpdate:modelValue":t[1]||(t[1]=l=>r.value.clientSearch=l),placeholder:"Buscar por cliente...",onInput:S},{suffix:a(()=>[s(m,{class:"text-gray-400"},{default:a(()=>[s(n(O))]),_:1})]),_:1},8,["modelValue"])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Data de Locação",-1)),s(T,{modelValue:r.value.rentalDateFrom,"onUpdate:modelValue":t[2]||(t[2]=l=>r.value.rentalDateFrom=l),type:"date",placeholder:"Selecione a data",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",class:"w-full"},null,8,["modelValue"])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Data de Devolução",-1)),s(T,{modelValue:r.value.returnDateFrom,"onUpdate:modelValue":t[3]||(t[3]=l=>r.value.returnDateFrom=l),type:"date",placeholder:"Selecione a data",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",class:"w-full"},null,8,["modelValue"])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),s(U,{modelValue:r.value.status,"onUpdate:modelValue":t[4]||(t[4]=l=>r.value.status=l),placeholder:"Todos os status",clearable:"",class:"w-full"},{default:a(()=>[s(V,{label:"Alugado",value:n(x).RENTED},null,8,["value"]),s(V,{label:"Entregue",value:n(x).RETURNED},null,8,["value"])]),_:1},8,["modelValue"])]),e("div",ne,[s(p,{variant:"outline",onClick:$,class:"w-full h-10",icon:"Refresh"},{default:a(()=>t[13]||(t[13]=[v(" Limpar ")])),_:1,__:[13]})])])]),_:1}),s(g,null,{default:a(()=>[e("div",ie,[e("table",re,[t[18]||(t[18]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Cliente "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Filmes "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Datas "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Usuário "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ações ")])],-1)),e("tbody",de,[(u(!0),c(D,null,C(F.value,l=>(u(),c("tr",{key:l.id},[e("td",ue,[e("div",ce,[e("div",me,[e("div",xe,[s(m,{class:"h-6 w-6 text-blue-600"},{default:a(()=>[s(n(N))]),_:1})])]),e("div",fe,[e("div",ge,o(l.client.name)+" "+o(l.client.lastName),1),e("div",pe,o(l.client.email),1)])])]),e("td",ve,[e("div",_e,[(u(!0),c(D,null,C(l.movies.slice(0,2),b=>(u(),c("span",{key:b.imdbID,class:"inline-flex items-center rounded-full p-1 text-xs font-medium text-center bg-gray-100 text-gray-800"},o(b.Title),1))),128)),l.movies.length>2?(u(),c("span",ye," +"+o(l.movies.length-2)+" mais ",1)):f("",!0)])]),e("td",he,[e("div",be,[e("div",null,"Locado: "+o(h(l.rentalDate)),1),e("div",null,"Devolver: "+o(h(l.returnDate)),1)]),A(l)?(u(),c("div",we," Atrasado ")):f("",!0)]),e("td",De,[e("div",ke,o(l.user.name),1),e("div",Re,o(k(l.user.document)),1)]),e("td",Ce,[e("span",{class:Y(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",l.status===n(x).RENTED?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},o(l.status===n(x).RENTED?"Alugado":"Entregue"),3)]),e("td",Fe,[e("div",Ee,[l.status===n(x).RENTED?(u(),Q(p,{key:0,variant:"success",size:"small",onClick:b=>L(l.id),loading:n(M),icon:"Check"},{default:a(()=>t[14]||(t[14]=[v(" Devolver ")])),_:2,__:[14]},1032,["onClick","loading"])):f("",!0),s(p,{variant:"outline",size:"small",onClick:b=>B(l),icon:"View"},{default:a(()=>t[15]||(t[15]=[v(" Detalhes ")])),_:2,__:[15]},1032,["onClick"])])])]))),128)),F.value.length===0?(u(),c("tr",Te,[e("td",Ve,[e("div",Ye,[s(m,{class:"h-12 w-12 text-gray-400 mb-4"},{default:a(()=>[s(n(W))]),_:1}),t[16]||(t[16]=e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"Nenhuma locação encontrada",-1)),t[17]||(t[17]=e("p",{class:"text-gray-500"},"Tente ajustar os filtros ou crie uma nova locação.",-1))])])])):f("",!0)])])])]),_:1})]),y.value?(u(),c("div",Ne,[e("div",je,[e("div",Me,[e("div",Se,[e("div",$e,[t[19]||(t[19]=e("h3",{class:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent"}," Detalhes da Locação ",-1)),e("span",{class:Y(["inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold",i.value?.status===n(x).RENTED?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200":"bg-gradient-to-r from-gray-100 to-slate-100 text-gray-800 border border-gray-200"])},o(i.value?.status===n(x).RENTED?"Alugado":"Entregue"),3)]),e("button",{onClick:t[5]||(t[5]=l=>y.value=!1),class:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100"},[s(m,{class:"h-6 w-6"},{default:a(()=>[s(n(X))]),_:1})])]),i.value?(u(),c("div",Le,[e("div",Be,[s(g,{variant:"glass",padding:"large"},{default:a(()=>[e("div",Ae,[e("div",Ue,[s(m,{class:"h-6 w-6"},{default:a(()=>[s(n(N),{class:"text-white"})]),_:1})]),t[20]||(t[20]=e("div",null,[e("h4",{class:"text-lg font-semibold text-gray-900"},"Cliente"),e("p",{class:"text-sm text-gray-600"},"Informações do cliente")],-1))]),e("div",Ie,[e("div",ze,[e("div",Ge,[e("p",Pe,o(i.value.client?.name)+" "+o(i.value.client?.lastName),1),e("p",He,o(i.value.client?.email),1)])]),e("div",Ke,[e("div",null,[t[21]||(t[21]=e("span",{class:"font-medium text-gray-700"},"CPF:",-1)),e("span",Oe,o(k(i.value.client?.cpf||"")),1)]),e("div",null,[t[22]||(t[22]=e("span",{class:"font-medium text-gray-700"},"Telefone:",-1)),e("span",Qe,o(i.value.client?.phone),1)])])])]),_:1}),s(g,{variant:"glass",padding:"large"},{default:a(()=>[e("div",We,[e("div",Xe,[s(m,{class:"h-6 w-6"},{default:a(()=>[s(n(q),{class:"text-white"})]),_:1})]),t[23]||(t[23]=e("div",null,[e("h4",{class:"text-lg font-semibold text-gray-900"},"Datas"),e("p",{class:"text-sm text-gray-600"},"Período da locação")],-1))]),e("div",qe,[e("div",null,[t[24]||(t[24]=e("p",{class:"text-sm font-medium text-gray-700"},"Data de Locação",-1)),e("p",Je,o(h(i.value.rentalDate)),1)]),e("div",null,[t[25]||(t[25]=e("p",{class:"text-sm font-medium text-gray-700"},"Data de Devolução",-1)),e("p",Ze,o(h(i.value.returnDate)),1)])])]),_:1})]),s(g,{variant:"glass",padding:"large"},{default:a(()=>[e("div",et,[e("div",tt,[s(m,{class:"h-6 w-6"},{default:a(()=>[s(n(j),{class:"text-white"})]),_:1})]),e("div",null,[t[26]||(t[26]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Filmes Alugados",-1)),e("p",st,o(i.value.movies?.length)+" filme(s)",1)])]),e("div",lt,[(u(!0),c(D,null,C(i.value.movies,l=>(u(),c("div",{key:l.imdbID,class:"flex items-center space-x-3 p-3 bg-white/50 rounded-xl border border-white/20 min-w-[280px]"},[e("div",at,[s(m,{class:"h-6 w-6 text-gray-400"},{default:a(()=>[s(n(j),{class:"text-white"})]),_:1})]),e("div",ot,[e("p",nt,o(l.Title),1),e("p",it,o(l.Year),1)])]))),128))])]),_:1}),s(g,{variant:"glass",padding:"large"},{default:a(()=>[e("div",rt,[e("div",dt,[s(m,{class:"h-6 w-6 text-white"},{default:a(()=>[s(n(J),{class:"text-white"})]),_:1})]),t[27]||(t[27]=e("div",null,[e("h4",{class:"text-lg font-semibold text-gray-900"},"Usuário Responsável"),e("p",{class:"text-sm text-gray-600"},"Quem criou a locação")],-1))]),e("div",ut,[e("div",ct,[e("p",mt,o(i.value.user?.name),1),e("p",xt,o(k(i.value.user?.document||"")),1)])])]),_:1})])):f("",!0),e("div",ft,[s(p,{variant:"outline",onClick:t[6]||(t[6]=l=>y.value=!1),icon:"Close"},{default:a(()=>t[28]||(t[28]=[v(" Fechar ")])),_:1,__:[28]})])])])])):f("",!0)],64)}}});export{bt as default};
