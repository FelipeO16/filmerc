import{d as D,l as N,r as y,a as w,C as $,I as E,k as B,c as m,b as o,G as h,e as r,w as n,_ as c,j as u,f as p,g as j,H as I,E as A,t as q,i as z,o as d}from"./index-CQ0vSrWa.js";import{_ as F}from"./BaseCard.vue_vue_type_script_setup_true_lang-B-bdGHi1.js";import{_ as f}from"./BaseInput.vue_vue_type_script_setup_true_lang-A9umqBxa.js";const M={class:"space-y-6"},P={class:"md:flex md:items-center md:justify-between"},R={class:"mt-4 flex md:mt-0 md:ml-4"},G={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},H={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},J={key:0,class:"mt-1 text-sm text-red-600"},O={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},T={key:1,class:"text-center py-12"},X=D({__name:"UserEditView",setup(K){const v=B(),_=E(),g=N(),i=y(!1),b=y(null),t=w({name:"",document:"",password:"",status:""}),a=w({name:"",document:"",password:"",status:""});$(()=>{V()});function V(){const s=_.params.id,e=g.getUserById(s);e?(b.value=e,t.name=e.name,t.document=e.document,t.status=e.status):v.push("/users")}function C(){Object.keys(a).forEach(e=>{a[e]=""});let s=!0;return t.name.trim()||(a.name="Nome é obrigatório",s=!1),t.document.trim()?t.document.length<11&&(a.document="Documento deve ter pelo menos 11 caracteres",s=!1):(a.document="Documento é obrigatório",s=!1),t.password&&t.password.length<6&&(a.password="Senha deve ter pelo menos 6 caracteres",s=!1),t.status||(a.status="Status é obrigatório",s=!1),s}async function k(){if(C())try{i.value=!0;const s={name:t.name,document:t.document,status:t.status};t.password&&(s.password=t.password),await g.updateUser(_.params.id,s)&&v.push("/users")}catch(s){console.error("Erro ao atualizar usuário:",s)}finally{i.value=!1}}return(s,e)=>{const S=p("el-icon"),x=p("el-option"),U=p("el-select");return d(),m("div",M,[o("div",P,[e[7]||(e[7]=o("div",{class:"flex-1 min-w-0"},[o("h2",{class:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate"}," Editar Usuário "),o("p",{class:"mt-1 text-sm text-gray-500"},"Atualize as informações do usuário.")],-1)),o("div",R,[r(c,{variant:"outline",onClick:e[0]||(e[0]=l=>s.$router.push("/users"))},{default:n(()=>[r(S,{class:"mr-2"},{default:n(()=>[r(j(I))]),_:1}),e[6]||(e[6]=u(" Voltar "))]),_:1,__:[6]})])]),b.value?(d(),h(F,{key:0},{default:n(()=>[o("form",{onSubmit:z(k,["prevent"]),class:"space-y-6"},[o("div",G,[r(f,{modelValue:t.name,"onUpdate:modelValue":e[1]||(e[1]=l=>t.name=l),label:"Nome Completo",placeholder:"Digite o nome completo",required:"",error:a.name},null,8,["modelValue","error"]),r(f,{modelValue:t.document,"onUpdate:modelValue":e[2]||(e[2]=l=>t.document=l),label:"Documento",placeholder:"Digite o documento (CPF/CNPJ)",required:"",error:a.document},null,8,["modelValue","error"])]),o("div",H,[r(f,{modelValue:t.password,"onUpdate:modelValue":e[3]||(e[3]=l=>t.password=l),type:"password",label:"Nova Senha (deixe em branco para manter a atual)",placeholder:"Digite a nova senha",error:a.password},null,8,["modelValue","error"]),o("div",null,[e[8]||(e[8]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u(" Status "),o("span",{class:"text-red-500"},"*")],-1)),r(U,{modelValue:t.status,"onUpdate:modelValue":e[4]||(e[4]=l=>t.status=l),placeholder:"Selecione o status",class:"w-full"},{default:n(()=>[r(x,{label:"Ativo",value:"active"}),r(x,{label:"Inativo",value:"inactive"})]),_:1},8,["modelValue"]),a.status?(d(),m("p",J,q(a.status),1)):A("",!0)])]),o("div",O,[r(c,{type:"button",variant:"outline",onClick:e[5]||(e[5]=l=>s.$router.push("/users"))},{default:n(()=>e[9]||(e[9]=[u(" Cancelar ")])),_:1,__:[9]}),r(c,{type:"submit",loading:i.value},{default:n(()=>e[10]||(e[10]=[u(" Salvar Alterações ")])),_:1,__:[10]},8,["loading"])])],32)]),_:1})):(d(),m("div",T,e[11]||(e[11]=[o("p",{class:"text-gray-500"},"Carregando...",-1)])))])}}});export{X as default};
