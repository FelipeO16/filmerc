import{d as $,y as S,r as U,a as f,c as g,e as a,f as r,w as n,_ as u,k as d,g as m,l as k,N,i as h,t as D,h as F,s as P,x as v}from"./index-CB8nZGuZ.js";import{_ as j}from"./BaseCard.vue_vue_type_script_setup_true_lang-sYe4c1O8.js";import{_ as c}from"./BaseInput.vue_vue_type_script_setup_true_lang-x46GD-RI.js";const q={class:"space-y-6"},B={class:"md:flex md:items-center md:justify-between"},E={class:"mt-4 flex md:mt-0 md:ml-4"},A={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},I={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},M={key:0,class:"mt-1 text-sm text-red-600"},O={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},H=$({__name:"UserCreateView",setup(R){const _=P(),b=S(),i=U(!1),s=f({name:"",document:"",password:"",status:""}),o=f({name:"",document:"",password:"",status:""});function w(){Object.keys(o).forEach(t=>{o[t]=""});let e=!0;return s.name.trim()||(o.name="Nome é obrigatório",e=!1),s.document.trim()?s.document.replace(/\D/g,"").length!==11?(o.document="CPF deve ter 11 dígitos",e=!1):s.document.length>14&&(o.document="CPF deve ter no máximo 14 caracteres",e=!1):(o.document="CPF é obrigatório",e=!1),s.password.trim()?s.password.length<6&&(o.password="Senha deve ter pelo menos 6 caracteres",e=!1):(o.password="Senha é obrigatória",e=!1),s.status||(o.status="Status é obrigatório",e=!1),e}function x(){let e=s.document.replace(/\D/g,"");e=e.substring(0,11),e=e.replace(/(\d{3})(\d)/,"$1.$2"),e=e.replace(/(\d{3})(\d)/,"$1.$2"),e=e.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),s.document=e}async function V(){if(w())try{i.value=!0,await b.createUser({name:s.name,document:s.document.replace(/\D/g,""),password:s.password,status:s.status})&&_.push("/users")}catch(e){console.error("Erro ao criar usuário:",e)}finally{i.value=!1}}return(e,t)=>{const y=m("el-icon"),p=m("el-option"),C=m("el-select");return v(),g("div",q,[a("div",B,[t[7]||(t[7]=a("div",{class:"flex-1 min-w-0"},[a("h2",{class:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate"}," Criar Novo Usuário "),a("p",{class:"mt-1 text-sm text-gray-500"},"Adicione um novo usuário ao sistema.")],-1)),a("div",E,[r(u,{variant:"outline",onClick:t[0]||(t[0]=l=>e.$router.push("/users"))},{default:n(()=>[r(y,{class:"mr-2"},{default:n(()=>[r(k(N))]),_:1}),t[6]||(t[6]=d(" Voltar "))]),_:1,__:[6]})])]),r(j,null,{default:n(()=>[a("form",{onSubmit:F(V,["prevent"]),class:"space-y-6"},[a("div",A,[r(c,{modelValue:s.name,"onUpdate:modelValue":t[1]||(t[1]=l=>s.name=l),label:"Nome Completo",placeholder:"Digite o nome completo",required:"",error:o.name},null,8,["modelValue","error"]),r(c,{modelValue:s.document,"onUpdate:modelValue":t[2]||(t[2]=l=>s.document=l),label:"CPF",placeholder:"000.000.000-00",required:"",error:o.document,onInput:x},null,8,["modelValue","error"])]),a("div",I,[r(c,{modelValue:s.password,"onUpdate:modelValue":t[3]||(t[3]=l=>s.password=l),type:"password",label:"Senha",placeholder:"Digite a senha",required:"",error:o.password},null,8,["modelValue","error"]),a("div",null,[t[8]||(t[8]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Status "),a("span",{class:"text-red-500"},"*")],-1)),r(C,{modelValue:s.status,"onUpdate:modelValue":t[4]||(t[4]=l=>s.status=l),placeholder:"Selecione o status",class:"w-full"},{default:n(()=>[r(p,{label:"Ativo",value:"active"}),r(p,{label:"Inativo",value:"inactive"})]),_:1},8,["modelValue"]),o.status?(v(),g("p",M,D(o.status),1)):h("",!0)])]),a("div",O,[r(u,{type:"button",variant:"outline",onClick:t[5]||(t[5]=l=>e.$router.push("/users"))},{default:n(()=>t[9]||(t[9]=[d(" Cancelar ")])),_:1,__:[9]}),r(u,{type:"submit",loading:i.value},{default:n(()=>t[10]||(t[10]=[d(" Criar Usuário ")])),_:1,__:[10]},8,["loading"])])],32)]),_:1})])}}});export{H as default};
