import{d as z,F as I,G,r as R,N as P,y as Q,c as u,e,i as f,f as s,w as o,_ as p,A as N,l as r,$ as x,t as a,g as w,H as D,k as v,Q as H,I as F,S as Y,z as J,a0 as O,X,J as q,m as j,n as K,x as c}from"./index-D98dJrHF.js";import{_ as g}from"./BaseCard.vue_vue_type_script_setup_true_lang-COep7mP0.js";import{_ as W}from"./BaseInput.vue_vue_type_script_setup_true_lang-CYOYGt7K.js";import{f as Z}from"./format-Cmdj2ZIU.js";import{p as ee}from"./pt-BR-DYZIZua9.js";const te={class:"space-y-6"},se={class:"md:flex md:items-center md:justify-between"},le={class:"mt-4 flex md:mt-0 md:ml-4"},ae={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-5"},oe={class:"flex items-end"},re={class:"overflow-x-auto"},ne={class:"min-w-full divide-y divide-gray-200/50"},ie={class:"bg-white/50 divide-y divide-gray-200/30"},de={class:"px-6 py-4 whitespace-nowrap"},ce={class:"flex items-center"},ue={class:"flex-shrink-0 h-12 w-12"},me={class:"h-12 w-12 rounded-full bg-gradient-to-br from-sky-500 to-purple-600 flex items-center justify-center shadow-lg"},xe={class:"ml-4"},fe={class:"text-sm font-semibold text-gray-900"},ge={class:"text-sm text-gray-600"},pe={class:"px-6 py-4"},ve={class:"flex flex-wrap gap-1"},_e={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},ye={class:"px-6 py-4 whitespace-nowrap"},be={class:"text-sm text-gray-900"},he={key:0,class:"text-xs text-red-600 font-medium"},we={class:"px-6 py-4 whitespace-nowrap"},De={class:"text-sm text-gray-900 font-medium"},ke={class:"text-sm text-gray-600"},Re={class:"px-6 py-4 whitespace-nowrap"},Fe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ce={class:"flex justify-end space-x-2"},Ee={key:0},Te={colspan:"6",class:"px-6 py-12 whitespace-nowrap text-sm text-gray-500 text-center"},Ve={class:"flex flex-col items-center justify-center"},Ne={class:"w-16 h-16 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full flex items-center justify-center mb-4"},Ye={key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50"},je={class:"bg-white/95 backdrop-blur-md rounded-2xl max-w-4xl w-full max-h-[90vh] shadow-2xl border border-white/20 p-4"},Se={class:"p-4 max-h-[80vh] overflow-y-auto"},$e={class:"flex justify-between items-start mb-6"},Me={class:"flex items-center space-x-4"},Le={key:0,class:"space-y-6"},Ae={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Be={class:"flex items-center mb-4"},Ue={class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg mr-4"},ze={class:"space-y-3"},Ie={class:"flex items-center"},Ge={class:"flex-1"},Pe={class:"font-semibold text-gray-900"},Qe={class:"text-sm text-gray-600"},He={class:"grid grid-cols-2 gap-4 text-sm"},Je={class:"text-gray-900"},Oe={class:"text-gray-900"},Xe={class:"flex items-center mb-4"},qe={class:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg mr-4"},Ke={class:"grid grid-cols-2 gap-6"},We={class:"text-lg font-semibold text-gray-900"},Ze={class:"text-lg font-semibold text-gray-900"},et={class:"flex items-center mb-4"},tt={class:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg mr-4"},st={class:"text-sm text-gray-600"},lt={class:"flex flex-wrap gap-4"},at={class:"w-12 h-16 bg-gradient-to-br from-gray-200 to-gray-300 rounded-lg flex items-center justify-center flex-shrink-0"},ot={class:"flex-1 min-w-0"},rt={class:"font-semibold text-gray-900 truncate"},nt={class:"text-sm text-gray-600"},it={class:"flex items-center mb-4"},dt={class:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg mr-4"},ct={class:"flex items-center"},ut={class:"flex-1"},mt={class:"font-semibold text-gray-900"},xt={class:"text-sm text-gray-600"},ft={class:"mt-8 flex justify-end"},ht=z({__name:"RentalListView",setup(gt){const _=I(),{loading:S}=G(_),i=R({clientSearch:"",rentalDateFrom:"",returnDateFrom:"",status:void 0}),n=R(null),y=R(!1);P(()=>{_.loadRentals()});const C=Q(()=>{const d={...i.value,rentalDateFrom:i.value.rentalDateFrom?new Date(i.value.rentalDateFrom):void 0,returnDateFrom:i.value.returnDateFrom?new Date(i.value.returnDateFrom):void 0};return _.filteredRentals(d)});let E;function $(){clearTimeout(E),E=setTimeout(()=>{},300)}function M(){i.value={clientSearch:"",rentalDateFrom:"",returnDateFrom:"",status:void 0}}function L(d){confirm("Confirmar devolução desta locação?")&&_.returnRental(d)}function A(d){n.value=d,y.value=!0}function b(d){return Z(d,"dd/MM/yyyy",{locale:ee})}function k(d){return d.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}function B(d){return d.status===x.RENTED&&d.returnDate<new Date}return(d,t)=>{const m=w("el-icon"),T=w("el-date-picker"),V=w("el-option"),U=w("el-select");return c(),u(D,null,[e("div",te,[e("div",se,[t[8]||(t[8]=e("div",{class:"flex-1 min-w-0"},[e("h2",{class:"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent"}," Gerenciamento de Locações "),e("p",{class:"mt-2 text-lg text-gray-600"},"Gerencie locações ativas, devoluções e histórico.")],-1)),e("div",le,[s(p,{variant:"gradient",onClick:t[0]||(t[0]=l=>d.$router.push("/rentals/create")),icon:"Plus"},{default:o(()=>t[7]||(t[7]=[v(" Nova Locação ")])),_:1,__:[7]})])]),s(g,{variant:"glass",padding:"large"},{default:o(()=>[e("div",ae,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Buscar Cliente",-1)),s(W,{modelValue:i.value.clientSearch,"onUpdate:modelValue":t[1]||(t[1]=l=>i.value.clientSearch=l),placeholder:"Buscar por cliente...",onInput:$},{suffix:o(()=>[s(m,{class:"text-gray-400"},{default:o(()=>[s(r(H))]),_:1})]),_:1},8,["modelValue"])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Data de Locação",-1)),s(T,{modelValue:i.value.rentalDateFrom,"onUpdate:modelValue":t[2]||(t[2]=l=>i.value.rentalDateFrom=l),type:"date",placeholder:"Selecione a data",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",class:"w-full"},null,8,["modelValue"])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Data de Devolução",-1)),s(T,{modelValue:i.value.returnDateFrom,"onUpdate:modelValue":t[3]||(t[3]=l=>i.value.returnDateFrom=l),type:"date",placeholder:"Selecione a data",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",class:"w-full"},null,8,["modelValue"])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Status",-1)),s(U,{modelValue:i.value.status,"onUpdate:modelValue":t[4]||(t[4]=l=>i.value.status=l),placeholder:"Todos os status",clearable:"",class:"w-full"},{default:o(()=>[s(V,{label:"Alugado",value:r(x).RENTED},null,8,["value"]),s(V,{label:"Entregue",value:r(x).RETURNED},null,8,["value"])]),_:1},8,["modelValue"])]),e("div",oe,[s(p,{variant:"outline",onClick:M,class:"w-full h-10",icon:"Refresh"},{default:o(()=>t[13]||(t[13]=[v(" Limpar ")])),_:1,__:[13]})])])]),_:1}),s(g,{variant:"glass",padding:"none"},{default:o(()=>[e("div",re,[e("table",ne,[t[18]||(t[18]=e("thead",{class:"bg-gradient-to-r from-gray-50 to-blue-50/50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Cliente "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Filmes "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Datas "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Usuário "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Ações ")])],-1)),e("tbody",ie,[(c(!0),u(D,null,F(C.value,l=>(c(),u("tr",{key:l.id,class:"hover:bg-white/80 transition-colors"},[e("td",de,[e("div",ce,[e("div",ue,[e("div",me,[s(m,{class:"h-6 w-6"},{default:o(()=>[s(r(Y),{class:"text-white"})]),_:1})])]),e("div",xe,[e("div",fe,a(l.client.name)+" "+a(l.client.lastName),1),e("div",ge,a(l.client.email),1)])])]),e("td",pe,[e("div",ve,[(c(!0),u(D,null,F(l.movies.slice(0,2),h=>(c(),u("span",{key:h.imdbID,class:"inline-flex items-center rounded-full p-1 text-xs font-medium text-center bg-gray-100 text-gray-800"},a(h.Title),1))),128)),l.movies.length>2?(c(),u("span",_e," +"+a(l.movies.length-2)+" mais ",1)):f("",!0)])]),e("td",ye,[e("div",be,[e("div",null,"Locado: "+a(b(l.rentalDate)),1),e("div",null,"Devolver: "+a(b(l.returnDate)),1)]),B(l)?(c(),u("div",he," Atrasado ")):f("",!0)]),e("td",we,[e("div",De,a(l.user.name),1),e("div",ke,a(k(l.user.document)),1)]),e("td",Re,[e("span",{class:N(["inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold",l.status===r(x).RENTED?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200":"bg-gradient-to-r from-gray-100 to-slate-100 text-gray-800 border border-gray-200"])},a(l.status===r(x).RENTED?"Alugado":"Entregue"),3)]),e("td",Fe,[e("div",Ce,[l.status===r(x).RENTED?(c(),J(p,{key:0,variant:"success",size:"small",onClick:h=>L(l.id),loading:r(S),icon:"Check"},{default:o(()=>t[14]||(t[14]=[v(" Devolver ")])),_:2,__:[14]},1032,["onClick","loading"])):f("",!0),s(p,{variant:"outline",size:"small",onClick:h=>A(l),icon:"View"},{default:o(()=>t[15]||(t[15]=[v(" Detalhes ")])),_:2,__:[15]},1032,["onClick"])])])]))),128)),C.value.length===0?(c(),u("tr",Ee,[e("td",Te,[e("div",Ve,[e("div",Ne,[s(m,{class:"h-8 w-8 text-gray-400"},{default:o(()=>[s(r(O))]),_:1})]),t[16]||(t[16]=e("p",{class:"text-lg font-semibold text-gray-900 mb-2"},"Nenhuma locação encontrada",-1)),t[17]||(t[17]=e("p",{class:"text-gray-600"},"Tente ajustar os filtros ou crie uma nova locação.",-1))])])])):f("",!0)])])])]),_:1})]),y.value?(c(),u("div",Ye,[e("div",je,[e("div",Se,[e("div",$e,[e("div",Me,[t[19]||(t[19]=e("h3",{class:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent"}," Detalhes da Locação ",-1)),e("span",{class:N(["inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold",n.value?.status===r(x).RENTED?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200":"bg-gradient-to-r from-gray-100 to-slate-100 text-gray-800 border border-gray-200"])},a(n.value?.status===r(x).RENTED?"Alugado":"Entregue"),3)]),e("button",{onClick:t[5]||(t[5]=l=>y.value=!1),class:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100"},[s(m,{class:"h-6 w-6"},{default:o(()=>[s(r(X))]),_:1})])]),n.value?(c(),u("div",Le,[e("div",Ae,[s(g,{variant:"glass",padding:"large"},{default:o(()=>[e("div",Be,[e("div",Ue,[s(m,{class:"h-6 w-6"},{default:o(()=>[s(r(Y),{class:"text-white"})]),_:1})]),t[20]||(t[20]=e("div",null,[e("h4",{class:"text-lg font-semibold text-gray-900"},"Cliente"),e("p",{class:"text-sm text-gray-600"},"Informações do cliente")],-1))]),e("div",ze,[e("div",Ie,[e("div",Ge,[e("p",Pe,a(n.value.client?.name)+" "+a(n.value.client?.lastName),1),e("p",Qe,a(n.value.client?.email),1)])]),e("div",He,[e("div",null,[t[21]||(t[21]=e("span",{class:"font-medium text-gray-700"},"CPF:",-1)),e("span",Je,a(k(n.value.client?.cpf||"")),1)]),e("div",null,[t[22]||(t[22]=e("span",{class:"font-medium text-gray-700"},"Telefone:",-1)),e("span",Oe,a(n.value.client?.phone),1)])])])]),_:1}),s(g,{variant:"glass",padding:"large"},{default:o(()=>[e("div",Xe,[e("div",qe,[s(m,{class:"h-6 w-6"},{default:o(()=>[s(r(q),{class:"text-white"})]),_:1})]),t[23]||(t[23]=e("div",null,[e("h4",{class:"text-lg font-semibold text-gray-900"},"Datas"),e("p",{class:"text-sm text-gray-600"},"Período da locação")],-1))]),e("div",Ke,[e("div",null,[t[24]||(t[24]=e("p",{class:"text-sm font-medium text-gray-700"},"Data de Locação",-1)),e("p",We,a(b(n.value.rentalDate)),1)]),e("div",null,[t[25]||(t[25]=e("p",{class:"text-sm font-medium text-gray-700"},"Data de Devolução",-1)),e("p",Ze,a(b(n.value.returnDate)),1)])])]),_:1})]),s(g,{variant:"glass",padding:"large"},{default:o(()=>[e("div",et,[e("div",tt,[s(m,{class:"h-6 w-6"},{default:o(()=>[s(r(j),{class:"text-white"})]),_:1})]),e("div",null,[t[26]||(t[26]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Filmes Alugados",-1)),e("p",st,a(n.value.movies?.length)+" filme(s)",1)])]),e("div",lt,[(c(!0),u(D,null,F(n.value.movies,l=>(c(),u("div",{key:l.imdbID,class:"flex items-center space-x-3 p-3 bg-white/50 rounded-xl border border-white/20 min-w-[280px]"},[e("div",at,[s(m,{class:"h-6 w-6 text-gray-400"},{default:o(()=>[s(r(j),{class:"text-white"})]),_:1})]),e("div",ot,[e("p",rt,a(l.Title),1),e("p",nt,a(l.Year),1)])]))),128))])]),_:1}),s(g,{variant:"glass",padding:"large"},{default:o(()=>[e("div",it,[e("div",dt,[s(m,{class:"h-6 w-6 text-white"},{default:o(()=>[s(r(K),{class:"text-white"})]),_:1})]),t[27]||(t[27]=e("div",null,[e("h4",{class:"text-lg font-semibold text-gray-900"},"Usuário Responsável"),e("p",{class:"text-sm text-gray-600"},"Quem criou a locação")],-1))]),e("div",ct,[e("div",ut,[e("p",mt,a(n.value.user?.name),1),e("p",xt,a(k(n.value.user?.document||"")),1)])])]),_:1})])):f("",!0),e("div",ft,[s(p,{variant:"outline",onClick:t[6]||(t[6]=l=>y.value=!1),icon:"Close"},{default:o(()=>t[28]||(t[28]=[v(" Fechar ")])),_:1,__:[28]})])])])])):f("",!0)],64)}}});export{ht as default};
