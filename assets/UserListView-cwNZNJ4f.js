import{d as T,r as I,L as P,z as g,w as l,e as t,c as u,I as b,i as A,t as f,M as L,f as m,B as M,g as k,H as x,k as $,_ as V,x as a,A as B,C as D,D as R,u as G,G as q,N as H,y as O,l as w,n as N,s as J}from"./index-D98dJrHF.js";import{_ as K}from"./PageHeader.vue_vue_type_script_setup_true_lang-cVgJCzcJ.js";import{_ as z}from"./BaseCard.vue_vue_type_script_setup_true_lang-COep7mP0.js";import{_ as Q}from"./BaseInput.vue_vue_type_script_setup_true_lang-CYOYGt7K.js";import{i as W,f as X}from"./format-Cmdj2ZIU.js";import{p as Y}from"./pt-BR-DYZIZua9.js";const Z={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},ee={class:"block text-sm font-semibold text-gray-700 mb-2"},te={class:"flex items-end"},se=T({__name:"FilterBar",props:{filters:{},modelValue:{}},emits:["update:modelValue","filter-change"],setup(S,{emit:v}){const s=S,_=v,i=I({...s.modelValue});s.filters.forEach(o=>{o.key in i.value||(i.value[o.key]="")}),P(i,o=>{_("update:modelValue",{...o})},{deep:!0});function e(){_("filter-change",{...i.value})}function y(){const o={};s.filters.forEach(h=>{o[h.key]=""}),i.value=o,_("filter-change",o)}return(o,h)=>{const U=k("el-icon"),F=k("el-option"),j=k("el-select");return a(),g(z,{variant:"glass",padding:"large"},{default:l(()=>[t("div",Z,[(a(!0),u(x,null,b(o.filters,c=>(a(),u("div",{key:c.key},[t("label",ee,f(c.label),1),c.type==="text"?(a(),g(Q,{key:0,modelValue:i.value[c.key],"onUpdate:modelValue":p=>i.value[c.key]=p,placeholder:c.placeholder,onInput:e},L({_:2},[c.icon?{name:"suffix",fn:l(()=>[m(U,{class:"text-gray-400"},{default:l(()=>[(a(),g(M(c.icon)))]),_:2},1024)]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder"])):c.type==="select"?(a(),g(j,{key:1,modelValue:i.value[c.key],"onUpdate:modelValue":p=>i.value[c.key]=p,placeholder:c.placeholder,clearable:"",class:"w-full",onChange:e},{default:l(()=>[(a(!0),u(x,null,b(c.options,p=>(a(),g(F,{key:p.value,label:p.label,value:p.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):A("",!0)]))),128)),t("div",te,[m(V,{variant:"outline",onClick:y,class:"w-full h-10",icon:"Refresh"},{default:l(()=>h[0]||(h[0]=[$(" Limpar Filtros ")])),_:1,__:[0]})])])]),_:1})}}}),ae={class:"overflow-x-auto"},oe={class:"min-w-full divide-y divide-gray-200/50"},le={class:"bg-gradient-to-r from-gray-50 to-blue-50/50"},ne={class:"bg-white/50 divide-y divide-gray-200/30"},re={key:0},ie=["colspan"],ce={class:"flex flex-col items-center justify-center"},de={class:"w-16 h-16 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full flex items-center justify-center mb-4"},ue={class:"text-lg font-semibold text-gray-900 mb-2"},me={class:"text-gray-600"},pe=T({__name:"DataTable",props:{columns:{},items:{},emptyIcon:{},emptyTitle:{default:"Nenhum item encontrado"},emptyMessage:{default:"Tente ajustar os filtros ou adicione novos itens."}},setup(S){function v(s,_){const i=_.split(".");let e=s;for(const y of i)if(e&&typeof e=="object"&&y in e)e=e[y];else return"";return e?String(e):""}return(s,_)=>{const i=k("el-icon");return a(),g(z,{variant:"glass",padding:"none"},{default:l(()=>[t("div",ae,[t("table",oe,[t("thead",le,[t("tr",null,[(a(!0),u(x,null,b(s.columns,e=>(a(),u("th",{key:e.key,class:B(["px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",e.align==="right"?"text-right":"text-left"])},f(e.label),3))),128))])]),t("tbody",ne,[(a(!0),u(x,null,b(s.items,(e,y)=>(a(),u("tr",{key:String(e.id||y),class:"hover:bg-white/80 transition-colors"},[(a(!0),u(x,null,b(s.columns,o=>(a(),u("td",{key:o.key,class:B(["px-6 py-4 whitespace-nowrap text-sm",o.align==="right"?"text-right":"text-left"])},[D(s.$slots,o.key,{item:e,column:o},()=>[$(f(v(e,o.key)),1)])],2))),128))]))),128)),s.items.length===0?(a(),u("tr",re,[t("td",{colspan:s.columns.length,class:"px-6 py-12 whitespace-nowrap text-sm text-gray-500 text-center"},[D(s.$slots,"empty",{},()=>[t("div",ce,[t("div",de,[m(i,{class:"h-8 w-8 text-gray-400"},{default:l(()=>[(a(),g(M(s.emptyIcon)))]),_:1})]),t("p",ue,f(s.emptyTitle),1),t("p",me,f(s.emptyMessage),1)])])],8,ie)])):A("",!0)])])])]),_:3})}}}),fe={class:"space-y-6"},_e={class:"flex items-center"},ye={class:"flex-shrink-0 h-12 w-12"},ge={class:"h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center shadow-lg"},he={class:"ml-4"},ve={class:"text-sm font-semibold text-gray-900"},be={class:"text-sm text-gray-900 font-medium"},ke={class:"text-sm text-gray-900"},xe={class:"flex items-center justify-end space-x-2"},Fe=T({__name:"UserListView",setup(S){const v=J(),s=R(),_=G(),{loading:i}=q(s),e=I({search:"",status:void 0}),y=[{key:"search",label:"Buscar",type:"text",placeholder:"Buscar por nome ou CPF...",icon:"Search"},{key:"status",label:"Status",type:"select",placeholder:"Todos os status",options:[{label:"Ativo",value:"active"},{label:"Inativo",value:"inactive"}]}],o=[{key:"user",label:"Usuário"},{key:"cpf",label:"CPF"},{key:"status",label:"Status"},{key:"createdAt",label:"Criado em"},{key:"actions",label:"Ações",align:"right"}];H(()=>{s.loadUsers()});const h=O(()=>s.filteredUsers(e.value));function U(){}function F(d){v.push(`/users/${d}/edit`)}async function j(d){confirm("Tem certeza que deseja desativar este usuário?")&&await s.deleteUser(d)}function c(d){if(!d)return"-";try{const n=typeof d=="string"?new Date(d):d;return W(n)?X(n,"dd/MM/yyyy",{locale:Y}):"-"}catch{return"-"}}function p(d){if(!d)return"";const n=String(d),C=n.replace(/\D/g,"");return C.length!==11?n:C.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}return(d,n)=>{const C=k("el-icon");return a(),u("div",fe,[m(K,{title:"Gerenciamento de Usuários",description:"Gerencie usuários do sistema, permissões e status de acesso."},{actions:l(()=>[m(V,{variant:"gradient",onClick:n[0]||(n[0]=r=>d.$router.push("/users/create")),icon:"Plus"},{default:l(()=>n[2]||(n[2]=[$(" Novo Usuário ")])),_:1,__:[2]})]),_:1}),m(se,{filters:y,modelValue:e.value,"onUpdate:modelValue":n[1]||(n[1]=r=>e.value=r),onFilterChange:U},null,8,["modelValue"]),m(pe,{columns:o,items:h.value,"empty-icon":w(N),"empty-title":"Nenhum usuário encontrado","empty-message":"Tente ajustar os filtros ou adicione um novo usuário."},{user:l(({item:r})=>[t("div",_e,[t("div",ye,[t("div",ge,[m(C,{class:"h-6 w-6"},{default:l(()=>[m(w(N),{class:"text-white"})]),_:1})])]),t("div",he,[t("div",ve,f(r.name),1)])])]),cpf:l(({item:r})=>[t("span",be,f(p(r.document)),1)]),status:l(({item:r})=>[t("span",{class:B(["inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold",r.status==="active"?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200":"bg-gradient-to-r from-red-100 to-pink-100 text-red-800 border border-red-200"])},f(r.status==="active"?"Ativo":"Inativo"),3)]),createdAt:l(({item:r})=>[t("span",ke,f(c(r.createdAt)),1)]),actions:l(({item:r})=>[t("div",xe,[m(V,{variant:"outline",size:"small",onClick:E=>F(String(r.id)),icon:"Edit"},{default:l(()=>n[3]||(n[3]=[$(" Editar ")])),_:2,__:[3]},1032,["onClick"]),r.status==="active"&&r.id!==w(_).user?.id?(a(),g(V,{key:0,variant:"danger",size:"small",onClick:E=>j(String(r.id)),loading:w(i),icon:"Close"},{default:l(()=>n[4]||(n[4]=[$(" Desativar ")])),_:2,__:[4]},1032,["onClick","loading"])):A("",!0)])]),_:1},8,["items","empty-icon"])])}}});export{Fe as default};
