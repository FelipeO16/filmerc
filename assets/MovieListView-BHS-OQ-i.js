import{d as R,L as q,r as g,a as z,c as i,b as t,E as v,e as s,w as o,f as L,t as c,_ as b,F as S,y as O,k as Y,M as K,g as p,D as U,j as f,h as E,x as W,B as G,N as H,O as P,o as d,P as J}from"./index-CPdfMFQf.js";import{_ as Q}from"./BaseCard.vue_vue_type_script_setup_true_lang-sxKVByN_.js";import{_ as $}from"./BaseInput.vue_vue_type_script_setup_true_lang-FKA9Jihk.js";const X={class:"space-y-8"},Z={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},ee={class:"flex items-end space-x-3"},te={key:0,class:"text-center py-16"},se={class:"w-24 h-24 bg-gradient-to-br from-blue-100 to-indigo-200 rounded-full flex items-center justify-center mx-auto mb-6"},ae={key:1,class:"text-center py-16"},le={key:2,class:"text-center py-16"},oe={class:"w-24 h-24 bg-gradient-to-br from-red-100 to-pink-200 rounded-full flex items-center justify-center mx-auto mb-6"},re={class:"text-lg text-red-600 mb-6"},ne={key:3,class:"text-center py-16"},ie={class:"w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-6"},de={key:4,class:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},ue={class:"aspect-w-2 aspect-h-3 bg-gradient-to-br from-gray-100 to-gray-200"},ce=["src","alt","onError"],fe={key:1,class:"w-full h-64 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center"},me={class:"p-6"},ge={class:"text-lg font-bold text-gray-900 mb-3 line-clamp-2"},ve={class:"space-y-2 text-sm text-gray-600 mb-4"},be={key:0},xe={class:"flex justify-between items-center"},pe={key:5,class:"text-center mt-8"},ye={class:"text-sm text-gray-600 mt-3"},_e={key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50"},he={class:"bg-white/95 backdrop-blur-md rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-white/20"},we={class:"p-8"},ke={class:"flex justify-between items-start mb-6"},Ce={class:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},Ee=["src","alt"],Ie={key:1,class:"w-full h-96 bg-gradient-to-br from-gray-200 to-gray-300 rounded-xl flex items-center justify-center"},Te={class:"space-y-4"},Me={class:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200/50"},je={class:"space-y-2 text-sm"},Ve={class:"flex justify-between"},Se={class:"text-gray-900"},Pe={class:"flex justify-between"},$e={class:"text-gray-900"},Ne={class:"flex justify-between"},Ae={class:"text-gray-900 font-mono"},Be={class:"mt-8 flex justify-end space-x-4"},Fe=R({__name:"MovieListView",setup(Re){const N=Y(),C=q(),y=g(!1),D=g(!1),_=g(!1),m=g(""),u=g([]),h=g(0),w=g(1),r=g(null),n=z({search:"",year:"",page:1});let I;function T(){clearTimeout(I),I=setTimeout(()=>{n.search.trim()&&k()},500)}async function k(){if(!n.search.trim()){C.showWarning("Digite o nome de um filme para buscar");return}try{y.value=!0,m.value="",w.value=1,n.page=1;const a=await P.searchMovies(n);a.Response==="True"?(u.value=a.Search||[],h.value=parseInt(a.totalResults||"0"),_.value=!0):(u.value=[],h.value=0,m.value=a.Error||"Erro desconhecido na busca",_.value=!0)}catch(a){console.error("Erro na busca:",a),a instanceof Error&&a.message.includes("Chave da API OMDb não configurada")?m.value="Chave da API OMDb não configurada. Crie um arquivo .env na raiz do projeto com VITE_OMDB_API_KEY=sua_chave_aqui":m.value="Erro ao buscar filmes. Verifique sua conexão.",u.value=[],h.value=0,_.value=!0}finally{y.value=!1}}async function A(){if(n.search.trim())try{D.value=!0,w.value++,n.page=w.value;const a=await P.searchMovies(n);a.Response==="True"&&a.Search&&u.value.push(...a.Search)}catch(a){console.error("Erro ao carregar mais filmes:",a),C.showError("Erro ao carregar mais filmes"),w.value--,n.page=w.value}finally{D.value=!1}}function B(){n.search="",n.year="",n.page=1,u.value=[],h.value=0,w.value=1,_.value=!1,m.value=""}function F(a){r.value=a}function M(a){C.showSuccess(`Filme "${a.Title}" selecionado para locação`),N.push({path:"/rentals/create",query:{movieId:a.imdbID,movieTitle:a.Title,movieYear:a.Year}})}function j(a){a.imageError=!0}return(a,e)=>{const x=L("el-icon");return d(),i(S,null,[t("div",X,[e[23]||(e[23]=t("div",{class:"md:flex md:items-center md:justify-between"},[t("div",{class:"flex-1 min-w-0"},[t("h2",{class:"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent"}," Buscar Filmes "),t("p",{class:"mt-2 text-lg text-gray-600"}," Explore o catálogo de filmes usando a base de dados OMDb. ")])],-1)),s(Q,{variant:"glass",padding:"large"},{default:o(()=>[t("div",Z,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Nome do Filme",-1)),s($,{modelValue:n.search,"onUpdate:modelValue":e[0]||(e[0]=l=>n.search=l),placeholder:"Digite o nome do filme...",onInput:T,onKeyup:K(k,["enter"])},{suffix:o(()=>[s(x,{class:"text-gray-400"},{default:o(()=>[s(p(U))]),_:1})]),_:1},8,["modelValue"])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Ano",-1)),s($,{modelValue:n.year,"onUpdate:modelValue":e[1]||(e[1]=l=>n.year=l),placeholder:"Ano (ex: 2023)",type:"number",min:"1900",max:"2030",onInput:T},null,8,["modelValue"])]),t("div",ee,[s(b,{variant:"gradient",onClick:k,loading:y.value,class:"flex-1 h-10",icon:"Search"},{default:o(()=>e[8]||(e[8]=[f(" Buscar ")])),_:1,__:[8]},8,["loading"]),s(b,{variant:"outline",onClick:B,class:"h-10",icon:"Refresh"},{default:o(()=>e[9]||(e[9]=[f(" Limpar ")])),_:1,__:[9]})])])]),_:1}),!_.value&&!y.value?(d(),i("div",te,[t("div",se,[s(x,{class:"h-12 w-12 text-blue-600"},{default:o(()=>[s(p(E))]),_:1})]),e[10]||(e[10]=t("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"Busque por filmes",-1)),e[11]||(e[11]=t("p",{class:"text-lg text-gray-600"},"Digite o nome de um filme para começar a busca.",-1))])):v("",!0),y.value?(d(),i("div",ae,e[12]||(e[12]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"},null,-1),t("p",{class:"mt-4 text-lg text-gray-600"},"Buscando filmes...",-1)]))):v("",!0),m.value?(d(),i("div",le,[t("div",oe,[s(x,{class:"h-12 w-12 text-red-600"},{default:o(()=>[s(p(W))]),_:1})]),e[14]||(e[14]=t("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"Erro na busca",-1)),t("p",re,c(m.value),1),s(b,{variant:"outline",onClick:k,icon:"Refresh"},{default:o(()=>e[13]||(e[13]=[f(" Tentar novamente ")])),_:1,__:[13]})])):v("",!0),_.value&&!y.value&&!m.value&&u.value.length===0?(d(),i("div",ne,[t("div",ie,[s(x,{class:"h-12 w-12 text-gray-600"},{default:o(()=>[s(p(G))]),_:1})]),e[15]||(e[15]=t("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"Nenhum filme encontrado",-1)),e[16]||(e[16]=t("p",{class:"text-lg text-gray-600"},"Tente uma busca diferente ou verifique a ortografia.",-1))])):v("",!0),u.value.length>0?(d(),i("div",de,[(d(!0),i(S,null,O(u.value,l=>(d(),i("div",{key:l.imdbID,class:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden border border-white/20"},[t("div",ue,[l.Poster&&l.Poster!=="N/A"&&!l.imageError?(d(),i("img",{key:0,src:l.Poster,alt:l.Title,class:"w-full h-64 object-cover",onError:V=>j(l)},null,40,ce)):(d(),i("div",fe,[s(x,{class:"h-16 w-16 text-gray-400"},{default:o(()=>[s(p(E))]),_:1})]))]),t("div",me,[t("h3",ge,c(l.Title),1),t("div",ve,[t("p",null,[e[17]||(e[17]=t("span",{class:"font-semibold"},"Ano:",-1)),f(" "+c(l.Year),1)]),t("p",null,[e[18]||(e[18]=t("span",{class:"font-semibold"},"Tipo:",-1)),f(" "+c(l.Type),1)]),l.imdbID?(d(),i("p",be,[e[19]||(e[19]=t("span",{class:"font-semibold"},"ID IMDb:",-1)),f(" "+c(l.imdbID),1)])):v("",!0)]),t("div",xe,[s(b,{variant:"outline",size:"small",onClick:V=>F(l),icon:"View"},{default:o(()=>e[20]||(e[20]=[f(" Detalhes ")])),_:2,__:[20]},1032,["onClick"]),s(b,{variant:"gradient",size:"small",onClick:V=>M(l),icon:"Check"},{default:o(()=>e[21]||(e[21]=[f(" Selecionar ")])),_:2,__:[21]},1032,["onClick"])])])]))),128))])):v("",!0),u.value.length>0&&h.value>u.value.length?(d(),i("div",pe,[s(b,{variant:"outline",onClick:A,loading:D.value,size:"large",icon:"Download"},{default:o(()=>e[22]||(e[22]=[f(" Carregar mais filmes ")])),_:1,__:[22]},8,["loading"]),t("p",ye," Mostrando "+c(u.value.length)+" de "+c(h.value)+" resultados ",1)])):v("",!0)]),r.value?(d(),i("div",_e,[t("div",he,[t("div",we,[t("div",ke,[t("h3",Ce,c(r.value.Title),1),t("button",{onClick:e[2]||(e[2]=l=>r.value=null),class:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100"},[s(x,{class:"h-6 w-6"},{default:o(()=>[s(p(H))]),_:1})])]),t("div",De,[t("div",null,[r.value.Poster&&r.value.Poster!=="N/A"&&!r.value.imageError?(d(),i("img",{key:0,src:r.value.Poster,alt:r.value.Title,class:"w-full rounded-xl shadow-lg",onError:e[3]||(e[3]=l=>j(r.value))},null,40,Ee)):(d(),i("div",Ie,[s(x,{class:"h-24 w-24 text-gray-400"},{default:o(()=>[s(p(E))]),_:1})]))]),t("div",Te,[t("div",Me,[e[27]||(e[27]=t("h4",{class:"font-semibold text-gray-900 mb-3"},"Informações do Filme",-1)),t("div",je,[t("div",Ve,[e[24]||(e[24]=t("span",{class:"font-medium text-gray-700"},"Ano:",-1)),t("span",Se,c(r.value.Year),1)]),t("div",Pe,[e[25]||(e[25]=t("span",{class:"font-medium text-gray-700"},"Tipo:",-1)),t("span",$e,c(r.value.Type),1)]),t("div",Ne,[e[26]||(e[26]=t("span",{class:"font-medium text-gray-700"},"ID IMDb:",-1)),t("span",Ae,c(r.value.imdbID),1)])])])])]),t("div",Be,[s(b,{variant:"outline",onClick:e[4]||(e[4]=l=>r.value=null),icon:"Close"},{default:o(()=>e[28]||(e[28]=[f(" Fechar ")])),_:1,__:[28]}),s(b,{variant:"gradient",onClick:e[5]||(e[5]=l=>M(r.value)),icon:"Check"},{default:o(()=>e[29]||(e[29]=[f(" Selecionar Filme ")])),_:1,__:[29]})])])])])):v("",!0)],64)}}}),Oe=J(Fe,[["__scopeId","data-v-3980ce77"]]);export{Oe as default};
