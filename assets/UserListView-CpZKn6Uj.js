import{d as A,l as N,u as D,s as z,r as E,C as F,p as R,c as u,b as t,e as a,w as o,_ as c,j as m,f,g as n,D as G,E as g,F as I,y as L,q as h,t as p,A as M,G as q,k as P,o as r}from"./index-CPdfMFQf.js";import{_ as w}from"./BaseCard.vue_vue_type_script_setup_true_lang-sxKVByN_.js";import{_ as H}from"./BaseInput.vue_vue_type_script_setup_true_lang-FKA9Jihk.js";import{p as J}from"./pt-BR-B99el_pn.js";import{f as K}from"./format-N88NX5Wy.js";const O={class:"space-y-6"},Q={class:"md:flex md:items-center md:justify-between"},W={class:"mt-4 flex md:mt-0 md:ml-4"},X={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},Y={class:"flex items-end"},Z={class:"overflow-x-auto"},tt={class:"min-w-full divide-y divide-gray-200"},et={class:"bg-white divide-y divide-gray-200"},st={class:"px-6 py-4 whitespace-nowrap"},at={class:"flex items-center"},ot={class:"flex-shrink-0 h-10 w-10"},it={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},lt={class:"ml-4"},nt={class:"text-sm font-medium text-gray-900"},rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},dt={class:"px-6 py-4 whitespace-nowrap"},ut={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ct={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},mt={class:"flex items-center justify-end space-x-2"},pt={key:0},xt={colspan:"5",class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},ft={class:"flex flex-col items-center justify-center py-8"},bt=A({__name:"UserListView",setup(_t){const b=P(),d=N(),k=D(),{loading:C}=z(d),l=E({search:"",status:void 0});F(()=>{d.loadUsers()});const _=R(()=>d.filteredUsers(l.value));let v;function U(){clearTimeout(v),v=setTimeout(()=>{},300)}function V(){l.value={search:"",status:void 0}}function S(i){b.push(`/users/${i}/edit`)}async function T(i){confirm("Tem certeza que deseja desativar este usuário?")&&await d.deleteUser(i)}function $(i){return K(i,"dd/MM/yyyy",{locale:J})}return(i,e)=>{const x=f("el-icon"),y=f("el-option"),j=f("el-select");return r(),u("div",O,[t("div",Q,[e[4]||(e[4]=t("div",{class:"flex-1 min-w-0"},[t("h2",{class:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate"}," Gerenciamento de Usuários "),t("p",{class:"mt-1 text-sm text-gray-500"}," Gerencie usuários do sistema, permissões e status de acesso. ")],-1)),t("div",W,[a(c,{variant:"gradient",onClick:e[0]||(e[0]=s=>i.$router.push("/users/create")),icon:"Plus"},{default:o(()=>e[3]||(e[3]=[m(" Novo Usuário ")])),_:1,__:[3]})])]),a(w,null,{default:o(()=>[t("div",X,[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Buscar",-1)),a(H,{modelValue:l.value.search,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.search=s),placeholder:"Buscar por nome ou documento...",onInput:U},{suffix:o(()=>[a(x,{class:"text-gray-400"},{default:o(()=>[a(n(G))]),_:1})]),_:1},8,["modelValue"])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),a(j,{modelValue:l.value.status,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.status=s),placeholder:"Todos os status",clearable:"",class:"w-full"},{default:o(()=>[a(y,{label:"Ativo",value:"active"}),a(y,{label:"Inativo",value:"inactive"})]),_:1},8,["modelValue"])]),t("div",Y,[a(c,{variant:"outline",onClick:V,class:"w-full",icon:"Refresh"},{default:o(()=>e[7]||(e[7]=[m(" Limpar Filtros ")])),_:1,__:[7]})])])]),_:1}),a(w,null,{default:o(()=>[t("div",Z,[t("table",tt,[e[12]||(e[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Usuário "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Documento "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Criado em "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ações ")])],-1)),t("tbody",et,[(r(!0),u(I,null,L(_.value,s=>(r(),u("tr",{key:s.id},[t("td",st,[t("div",at,[t("div",ot,[t("div",it,[a(x,{class:"h-6 w-6 text-blue-600"},{default:o(()=>[a(n(h))]),_:1})])]),t("div",lt,[t("div",nt,p(s.name),1)])])]),t("td",rt,p(s.document),1),t("td",dt,[t("span",{class:M(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},p(s.status==="active"?"Ativo":"Inativo"),3)]),t("td",ut,p($(s.createdAt)),1),t("td",ct,[t("div",mt,[a(c,{variant:"outline",size:"small",onClick:B=>S(s.id),icon:"Edit"},{default:o(()=>e[8]||(e[8]=[m(" Editar ")])),_:2,__:[8]},1032,["onClick"]),s.status==="active"&&s.id!==n(k).user?.id?(r(),q(c,{key:0,variant:"danger",size:"small",onClick:B=>T(s.id),loading:n(C),icon:"Close"},{default:o(()=>e[9]||(e[9]=[m(" Desativar ")])),_:2,__:[9]},1032,["onClick","loading"])):g("",!0)])])]))),128)),_.value.length===0?(r(),u("tr",pt,[t("td",xt,[t("div",ft,[a(x,{class:"h-12 w-12 text-gray-400 mb-4"},{default:o(()=>[a(n(h))]),_:1}),e[10]||(e[10]=t("p",{class:"text-lg font-medium text-gray-900 mb-2"},"Nenhum usuário encontrado",-1)),e[11]||(e[11]=t("p",{class:"text-gray-500"},"Tente ajustar os filtros ou adicione um novo usuário.",-1))])])])):g("",!0)])])])]),_:1})])}}});export{bt as default};
